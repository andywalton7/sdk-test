---
title: PRO Call Flows
language_tabs:
  - json: JSON
  - xml: XML
toc_footers: []
includes: []
search: false
highlight_theme: darkula
headingLevel: 2

---

<!-- Generator: Widdershins v3.6.6 -->

<section>

<h1 id="header">PRO Call Flows.</h1>

Ready to get started with SortedPRO? This guide explains how to use PRO's APIs in some common use cases, helping you to get up and running in minutes. 

We'll cover:

* **[Creating and manifesting a consignment](#creating-and-manifesting-a-consignment)** 
   
   A simple flow to create a consignment, allocate it to a carrier service using criteria of your choosing, and confirm the delivery with the carrier. 

* **[Selecting delivery options](#selecting-delivery-options)** 

   Used when you want to present delivery options to your customer at point of purchase. PRO automatically creates and allocates consignments based on the options the customer selects.

* **[Selecting pickup options](#selecting-pickup-options)**

   Similar to the delivery option flow, but used when offering pickup services rather than home delivery. 

* **[Creating a pack order flow from an existing order](#creating-a-pack-order-flow-from-an-existing-order)**

   Used when you can't guarantee that all parts of a customer's order will come from the same warehouse. PRO generates multiple consignments where required.

* **[Using delivery options to create a pack order flow](#creating-a-pack-order-flow-from-delivery-options)**

   Used when you can't guarantee that all parts of a customer's order will come from the same warehouse and want to present delivery options to your customer at point of purchase.

* **[Obtaining and selecting delivery quotes](#selecting-quotes)**

   Generally used in customer service use cases, where an operator needs to present delivery options to a customer manually and act on the customer's response.

<aside class="note">
  This guide is intended as a primer for PRO. If you're already familiar with the basics of PRO, or you just need reference info for PRO's APIs, see the <strong><a href="https://docs.electioapp.com/#/api">API reference</a></strong>.
</aside>

</section>

<section>

# Getting Started

<section>

## Authentication

> Example API Key

```
ocp-apim-subscription-key: [qwerrtyuiioop0987654321]
```

You'll need to provide a valid API key in every API call you make to PRO. Each PRO user has a unique API key, which is generated by PRO when the user's account is created. To retrieve your API key:

1. Log in to the PRO dashboard and select **Settings > Users & roles > User Accounts** to display the **User Accounts** page. A list of the user accounts that you have access to is displayed.
2. Click the **Edit User** button for your account to display details relating to your account.
3. Click **Show API Key**. PRO prompts you to enter your UI password.
4. Enter your password and click **Retrieve API Key** to display your API key.

To use your API key, include it in an `ocp-apim-subscription-key` header when making calls.

</section>

<section>

## Specifying Request / Response Format

PRO's APIs support both JSON and XML. As such, you'll need to specify which content type you're sending in each API request. To do so, pass a `content-type` header with a value of `application/json`, `text/xml` or `application/xml` (as applicable) in your request. All other `content-type` values are invalid.

You can also specify the format that PRO should respond in. To do so, pass an `accept` header, again with a value of `application/json`, `text/xml` or `application/xml` in your request. By default, PRO returns `application/json` data.

</section>

</section>

<section>

# Creating and Manifesting a Consignment

> Step 1: Create Consignments endpoint
```
POST https://api.electioapp.com/consignments
```
> Step 2: Allocation endpoints
```
PUT https://api.electioapp.com/allocation/{consignmentReference}/allocatewithcheapestquote
PUT https://api.electioapp.com/allocation/{consignmentReference}/allocatewithservicegroup/{mpdCarrierServiceGroupReference}
PUT https://api.electioapp.com/allocation/allocate
PUT https://api.electioapp.com/allocation/allocatewithcarrierservice
PUT https://api.electioapp.com/allocation/allocateConsignmentsWithServiceFilters
```
> Step 3: Get Labels endpoint
```
GET https://api.electioapp.com/labels/{consignmentReference}
```
> Step 4: Manifest Consignments endpoint
```
PUT https://api.electioapp.com/consignments/manifest
```
Creating new consignments, allocating them to a suitable carrier service, and then adding them to that service's manifest is perhaps PRO's most basic use case. This call flow is useful if you don't need to worry about presenting point-of-purchase delivery options to the customer, and you know that all your items will ship from the same physical location.

There are four steps to the process:

![alt text](source/images/create-manifest-flow.png)

1. **Create the consignment** - Use the **[Create Consignment](https://docs.electioapp.com/#/api/CreateConsignment)** endpoint to record the details of your new consignment.
2. **Allocate the consignment** - Use one of PRO's **[Allocation](https://docs.electioapp.com/#/api/AllocateConsignment)** endpoints to select the carrier service that your consignment will use. You can select a specific service or group of services, allocate based on pre-set allocation rules, or use filters to select the best service for an individual consignment.
3. **Get the consignment's labels** - Use the **[Get Labels](https://docs.electioapp.com/#/api/GetLabels)** endpoint to get the delivery label for your consignment.
4. **Manifest the consignment** - Use the **[Manifest Consignments](https://docs.electioapp.com/#/api/ManifestConsignments)** endpoint to confirm the consignment with the selected carrier. At this point, the consignment is ready to ship.

This section gives more detail on each stage of the process, and provides worked examples. You'll be manifesting consignments in no time!

<section>

## Step 1: Creating Consignments

!INCLUDE includes\_create_consignments.md

<section>

## Step 2: Allocating Consignments

!INCLUDE includes\_allocating.md

</section>

<section>

## Step 2a: Allocating by Cheapest Quote

!INCLUDE includes\_allocate_by_cheapest_quote.md

</section>

<section>

## Step 2b: Allocating to a Service Group

!INCLUDE includes\_allocate_with_service_group.md

</section>

<section>

## Step 2c: Allocating using Default Rules

!INCLUDE includes\_allocate_using_default_rules.md

</section>

<section>

## Step 2d: Allocating to a Specific Carrier Service

!INCLUDE includes\_allocate_with_carrier_service.md

</section>

<section>

## Step 2e: Allocating Using Service Filters

!INCLUDE includes\_allocate_with_service_filters.md

</section>

</section>

<section>

## Step 3: Getting Shipment Labels

!INCLUDE includes\_get_labels.md

</section>

<section>

## Step 4: Manifesting a Consignment

!INCLUDE includes\_manifest_consignments.md

And we're done! Read on to learn how to allocate consignments based on options presented to the customer at point of purchase, and deal with orders that may require multiple consignments to fulfil. 

</section>

</section>

<section>

# Selecting Delivery Options

> Step 1: Delivery Options endpoint
```
POST https://api.electioapp.com/deliveryoptions
```

> Step 2: Select Option endpoint
```
POST https://api.electioapp.com/deliveryoptions/select/{deliveryOptionReference}
```

> Step 3: Get Labels endpoint
```
GET https://api.electioapp.com/labels/{consignmentReference}
```

> Step 4: Manifest Consignments endpoint
```
PUT https://api.electioapp.com/consignments/manifest
```

The **Select Delivery Options** flow enables you to provide delivery windows to your customer at point of purchase. When the customer selects their preferred option, PRO automatically creates and allocates a consignment based on the details give.

There are four steps to the process:

![delivery-options](source/images/delivery-options.png)

1. **Get Delivery Options** - Use the **[Delivery Options](https://docs.electioapp.com/#/api/DeliveryOptions)** endpoint to request a list of available delivery options for the (as yet uncreated) consignment that the customer's order will generate.
2. **Select Delivery Option** - Use the **[Select Option](https://docs.electioapp.com/#/api/SelectOption)** endpoint to tell PRO which option the customer selected. At this point, PRO has all the information it needs to create and allocate a consignment.
3. **Get the consignment's labels** - Use the **[Get Labels](https://docs.electioapp.com/#/api/GetLabels)** endpoint to get the delivery label for your consignment.
4. **Manifest the consignment** - Use the **[Manifest Consignments](https://docs.electioapp.com/#/api/ManifestConsignments)** endpoint to confirm the consignment with the selected carrier. At this point, the consignment is ready to ship.

This section gives more detail on each stage of the process, and provides worked examples. 

<section>

## Step 1: Getting Delivery Options

!INCLUDE includes\_getting_delivery_options.md

</section>

<section>

## Step 2: Selecting a Delivery Option

!INCLUDE includes\_select_option.md

</section>

<section>

## Step 3: Getting Labels

!INCLUDE includes\_get_labels.md

</section>

<section>

## Step 4: Manifesting the Consignment

!INCLUDE includes\_manifest_consignments.md

</section>

</section>

<section>

# Selecting Pickup Options

The **Select Pickup Options** flow is very similar to the **Select Delivery Options** flow covered in the previous section. Rather than enabling the customer to select options for direct delivery, the **Select Pickup Options** flow enables you to build functionality that lets your customers select a pickup location and timeslot for their consignment.

There are four steps to the process:

1. **Get Pickup Options** - Use the **[Pickup Options](https://docs.electioapp.com/#/api/PickupOptions)** endpoint to request a list of available delivery locations and timeslots for the (as yet uncreated) consignment that the customer's order will generate.
2. **Select Delivery Option** - Use the **[Select Option](https://docs.electioapp.com/#/api/SelectOption)** endpoint to tell PRO which option the customer selected. At this point, PRO has all the information it needs to create and allocate a consignment.
3. **Get the consignment's labels** - Use the **[Get Labels](https://docs.electioapp.com/#/api/GetLabels)** endpoint to get the delivery label for your consignment.
4. **Manifest the consignment** - Use the **[Manifest Consignments](https://docs.electioapp.com/#/api/ManifestConsignments)** endpoint to confirm the consignment with the selected carrier. At this point, the consignment is ready to ship.

This section gives more detail on each stage of the process, and provides worked examples. 

![pickup-options](source/images/pickup-options.png)

<section>

## Step 1: Getting Pickup Options

!INCLUDE includes\_get_pickup_options.md

</section>

<section>

## Step 2: Selecting a Pickup Option

!INCLUDE includes\_select_option.md

</section>

<section>

## Step 3: Get Shipment Labels

!INCLUDE includes\_get_labels.md

</section>

<section>

## Step 4: Manifest the Consignment

!INCLUDE includes\_manifest_consignments.md

</section>

</section>

<section>

# Creating a Pack Order Flow From Delivery Options

![delivery-options-pack-order-flow](source/images/delivery-options-pack-order-flow.png)

</section>

<section>

## Step 1: Getting Options

<aside class="note">
  Works with both delivery and pickup.
</aside>

!INCLUDE includes\_getting_delivery_options.md

</section>

<section>

## Step 2: Selecting an Option as an Order

!INCLUDE includes\_select_option_as_order.md

</section>

<section>

## Step 3: Packing the Order

!INCLUDE includes\_pack_order.md

</section>

<section>

## Step 4: Allocating the Consignment

!INCLUDE includes\_allocating.md

<section>

## Step 4a: Allocating by Cheapest Quote

!INCLUDE includes\_allocate_by_cheapest_quote.md

</section>

<section>

## Step 4b: Allocating to a Service Group

!INCLUDE includes\_allocate_with_service_group.md

</section>

<section>

## Step 4c: Allocating using Default Rules

!INCLUDE includes\_allocate_using_default_rules.md

</section>

<section>

## Step 4d: Allocating to a Specific Carrier Service

!INCLUDE includes\_allocate_with_carrier_service.md

</section>

<section>

## Step 4e: Allocating Using Service Filters

!INCLUDE includes\_allocate_with_service_filters.md

</section>

</section>

<section>

## Step 5: Getting Shipment Labels

!INCLUDE includes\_get_labels.md

</section>

<section>

## Step 6: Manifesting the Consignment

!INCLUDE includes\_manifest_consignments.md

</section>

<section>

# Creating a Pack Order Flow From an Existing Order

![order-pack-order-flow](source/images/order-pack-order-flow.png)

<section>

## Step 1: Creating the Order

!INCLUDE includes\_create_orders.md

</section>

<section>

## Step 2: Packing the Order

!INCLUDE includes\_pack_orders.md

</section>

<section>

## Step 3: Allocating the Consignment

!INCLUDE includes\_allocating.md

<section>

## Step 3a: Allocating by Cheapest Quote

!INCLUDE includes\_allocate_by_cheapest_quote.md

</section>

<section>

## Step 3b: Allocating to a Service Group

!INCLUDE includes\_allocate_with_service_group.md

</section>

<section>

## Step 3c: Allocating using Default Rules

!INCLUDE includes\_allocate_using_default_rules.md

</section>

<section>

## Step 3d: Allocating to a Specific Carrier Service

!INCLUDE includes\_allocate_with_carrier_service.md

</section>

<section>

## Step 3e: Allocating Using Service Filters

!INCLUDE includes\_allocate_with_service_filters.md

</section>

</section>

## Step 4: Getting Shipment Labels

!INCLUDE includes\_get_labels.md

</section>

<section>

## Step 5: Manifesting the Consignment

!INCLUDE includes\_manifest_consignments.md

</section>

</section>

<section>

# Selecting Quotes

![get-quotes](source/images/get-quotes.png)

<section>

## Step 1 Creating a Consignment

!INCLUDE includes\_create_consignments.md

</section>

<section>

## Step 2: Getting Quotes

!INCLUDE includes\_get_quotes_by_con_ref.md

</section>

<section>

## Step 3: Selecting a Quote

!INCLUDE includes\_allocate_with_quote.md

</section>

## Step 4: Getting Labels

!INCLUDE includes\_get_labels.md

</section>

<section>

## Step 5: Manifesting a Consignment

!INCLUDE includes\_manifest_consignments.md

</section>

</section>

</section>
