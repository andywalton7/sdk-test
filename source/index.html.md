---
title: PRO Call Flows
language_tabs:
  - json: JSON
  - xml: XML
toc_footers: []
includes: []
search: false
highlight_theme: darkula
headingLevel: 2

---

<!-- Generator: Widdershins v3.6.6 -->

<section>

<h1 id="header">PRO Call Flows.</h1>

Ready to get started with SortedPRO? This guide explains the API call flows needed in some of PRO's most common use cases, helping you to get up and running in minutes. 

We'll cover:

* **[Creating and manifesting a consignment](#creating-and-manifesting-a-consignment)** 
   
   A simple flow to create a consignment, allocate it to a carrier service using criteria of your choosing, and confirm the delivery with the carrier. 

* **[Selecting delivery options](#selecting-delivery-options)** 

   Used when you want to present delivery options to your customer at point of purchase. PRO automatically creates and allocates consignments based on the options the customer selects.

* **[Selecting pickup options](#selecting-pickup-options)**

   Similar to the delivery option flow, but used when offering pickup services rather than home delivery. 

* **[Creating a pack order flow from an existing order](#creating-a-pack-order-flow-from-an-existing-order)**

   Used when you can't guarantee that all parts of a customer's order will come from the same warehouse. PRO generates multiple consignments where required.

* **[Using delivery options to create a pack order flow](#creating-a-pack-order-flow-from-delivery-options)**

   Used when you can't guarantee that all parts of a customer's order will come from the same warehouse and want to present delivery options to your customer at point of purchase.

* **[Obtaining and selecting delivery quotes](#selecting-quotes)**

   Generally used in customer service use cases, where an operator needs to present delivery options to a customer manually and act on the customer's response.

<aside class="note">
  This guide is intended as a primer for PRO. If you're already familiar with the basics of PRO, or you just need reference info for PRO's APIs, see the <a href="https://docs.electioapp.com/#/api">API reference</a>.
</aside>

</section>

<section>

# Getting Started

<section>

## Authentication

> Example API Key

```
ocp-apim-subscription-key: [qwerrtyuiioop0987654321]
```

You'll need to provide a valid API key in every API call you make to PRO. Each PRO user has a unique API key, which is generated by PRO when the user's account is created. To retrieve your API key:

1. Log in to the PRO dashboard and select **Settings > Users & roles > User Accounts** to display the **User Accounts** page. A list of the user accounts that you have access to is displayed.
2. Click the **Edit User** button for your account to display details relating to your account.
3. Click **Show API Key**. PRO prompts you to enter your UI password.
4. Enter your password and click **Retrieve API Key** to display your API key.

To use your API key, include it in an `ocp-apim-subscription-key` header when making calls.

</section>

<section>

## Specifying Request / Response Format

PRO's APIs support both JSON and XML. As such, you'll need to specify which content type you're sending in each API request. To do so, pass a `content-type` header with a value of `application/json`, `text/xml` or `application/xml` (as applicable) in your request. All other `content-type` values are invalid.

You can also specify the format that PRO should respond in. To do so, pass an `accept` header, again with a value of `application/json`, `text/xml` or `application/xml` in your request. By default, PRO returns `application/json` data.

</section>

</section>

<section>

# Creating and Manifesting a Consignment

Taking a consignment from creation through to manifest is perhaps the most basic integration type offered by PRO. There are four steps to the process:

![alt text](source/images/create-manifest-flow.png)

> Step 1: Create Consignments endpoint
```
POST https://api.electioapp.com/consignments
```
1. **Create the consignment** - Use the **[Create Consignment](https://docs.electioapp.com/#/api/CreateConsignment)** endpoint to record the details of your new consignment.

> Step 2: Allocation endpoints
```
PUT https://api.electioapp.com/allocation/{consignmentReference}/allocatewithcheapestquote
PUT https://api.electioapp.com/allocation/{consignmentReference}/allocatewithservicegroup/{mpdCarrierServiceGroupReference}
PUT https://api.electioapp.com/allocation/allocate
PUT https://api.electioapp.com/allocation/allocatewithcarrierservice
PUT https://api.electioapp.com/allocation/allocateConsignmentsWithServiceFilters
```

2. **Allocate the consignment** - Use one of PRO's **[Allocation](https://docs.electioapp.com/#/api/AllocateConsignment)** endpoints to select the carrier service that your consignment will use. You can select a specific service or group of services, allocate based on pre-set allocation rules, or use filters to select the best service for an individual consignment.

> Step 3: Get Labels endpoint
```
GET https://api.electioapp.com/labels/{consignmentReference}
```

3. **Get the consignment's labels** - Use the **[Get Labels](https://docs.electioapp.com/#/api/GetLabels)** endpoint to get the delivery label for your consignment.

> Step 4: Manifest Consignments endpoint
```
PUT https://api.electioapp.com/consignments/manifest
```

4. **Manifest the consignment** - Use the **[Manifest Consignments](https://docs.electioapp.com/#/api/ManifestConsignments)** endpoint to confirm the consignment with the selected carrier. At this point, the consignment is ready to ship.

This section gives more detail on each stage of the process, and provides worked examples. You'll be manifesting consignments in no time!

<section>

## Step 1: Creating Consignments

> Example Create Consignment Request
```json
{
  "Packages": [
    {
      "Items": [
        {
          "Sku": "SKU093434",
          "Model": "ITM-002",
          "Description": "Striped Bamboo Red/White",
          "CountryOfOrigin": {
            "IsoCode": {
              "TwoLetterCode": "GB"
            }
          },
          "HarmonisationCode": "Harmonisation_Code",
          "Weight": {
            "Kg": 0.5
          },
          "Dimensions": {
            "Unit": "Cm",
            "Width": 10.0,
            "Length": 10.0,
            "Height": 10.0
          },
          "Value": {
            "Amount": 5.99,
            "Currency": {
              "IsoCode": "GBP"
            }
          },
          "ItemReferenceProvidedByCustomer": "ITEMREF-098",
          "Barcode": {
            "Code": "09887-091221",
            "BarcodeType": "Code39"
          },
          "MetaData": [
            {
              "KeyValue": "Picker",
              "StringValue": "David Thomas"
            }
          ],
          "Quantity": 1,
          "Unit": "Box",
          "HarmonisationKeyWords": [
            "Keyword1"
          ],
          "ContentClassification": "Unrestricted",
          "ContentClassificationDetails": "NotSpecified"
        }
      ],
      "PackageReferenceProvidedByCustomer": "MYPACK-00923",
      "Weight": {
        "Kg": 0.5
      },
      "Dimensions": {
        "Unit": "Cm",
        "Width": 10.0,
        "Length": 10.0,
        "Height": 10.0
      },
      "Description": "Socks",
      "Value": {
        "Amount": 5.99,
        "Currency": {
          "IsoCode": "GBP"
        }
      },
      "Barcode": {
        "Code": "09887-091221",
        "BarcodeType": "Code39"
      },
      "MetaData": [
        {
          "KeyValue": "WMS-REF",
          "IntValue": 77656555
        }
      ]
    }
  ],
  "Addresses": [
    {
      "AddressType": "Origin",
      "ShippingLocationReference": "TLS_London",
      "IsCached": false
    },
    {
      "AddressType": "Destination",
      "Contact": {
        "Title": "Mr",
        "FirstName": "Peter",
        "LastName": "McPetersson",
        "Telephone": "07702123456",
        "Mobile": "07702123456",
        "LandLine": "0161544123",
        "Email": "peter.mcpetersson@test.com"
      },
      "CompanyName": "Test Company (UK) Ltd.",
      "AddressLine1": "13 Porter Street",
      "AddressLine2": "Pressington",
      "AddressLine3": "Carlsby",
      "Town": "Manchester",
      "Region": "Greater Manchester",
      "Postcode": "M1 5WG",
      "Country": {
        "Name": "Great Britain",
        "IsoCode": {
          "TwoLetterCode": "GB"
        }
      },
      "SpecialInstructions": "Gate code: 4454",
      "LatLong": {
        "Latitude": 53.474220,
        "Longitude": -2.246049
      },
      "IsCached": false
    }
  ]
}
```
```xml
<?xml version="1.0" encoding="utf-8"?>
<CreateConsignmentRequest xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://electioapp.com/schemas/v1.1/MPD.Electio.SDK.DataTypes.Consignments">
    <Addresses>
    	<Address>
            <Contact xmlns="http://electioapp.com/schemas/v1/MPD.Electio.SDK.DataTypes.Common">
                <Reference xsi:nil="true" />
                <Title />
                <FirstName>TLScontact</FirstName>
                <LastName>London</LastName>
                <Telephone>080015454646</Telephone>
                <Mobile>080015454646</Mobile>
                <LandLine />
                <Email>lon@tls.com</Email>
            </Contact>
            <ShippingLocationReference xmlns="http://electioapp.com/schemas/v1/MPD.Electio.SDK.DataTypes.Common">TLS_London</ShippingLocationReference>
            <AddressLine1 xmlns="http://electioapp.com/schemas/v1/MPD.Electio.SDK.DataTypes.Common">Unit 19</AddressLine1>
            <AddressLine2 xmlns="http://electioapp.com/schemas/v1/MPD.Electio.SDK.DataTypes.Common">Exhibition House</AddressLine2>
            <AddressLine3 xmlns="http://electioapp.com/schemas/v1/MPD.Electio.SDK.DataTypes.Common">Addison Bridge Place</AddressLine3>
            <Town xmlns="http://electioapp.com/schemas/v1/MPD.Electio.SDK.DataTypes.Common">London</Town>
            <Region xmlns="http://electioapp.com/schemas/v1/MPD.Electio.SDK.DataTypes.Common">Greater London</Region>
            <Postcode xmlns="http://electioapp.com/schemas/v1/MPD.Electio.SDK.DataTypes.Common">W14 8XP</Postcode>
            <Country xmlns="http://electioapp.com/schemas/v1/MPD.Electio.SDK.DataTypes.Common">
                <Name>United Kingdom</Name>
                <IsoCode>
                    <TwoLetterCode>GB</TwoLetterCode>
                </IsoCode>
            </Country>
            <SpecialInstructions xmlns="http://electioapp.com/schemas/v1/MPD.Electio.SDK.DataTypes.Common" />
            <AddressType>Origin</AddressType>
        </Address>
        <Address>
            <Contact xmlns="http://electioapp.com/schemas/v1/MPD.Electio.SDK.DataTypes.Common">
                <Reference xsi:nil="true" />
                <Title>Mr</Title>
                <FirstName>Peter</FirstName>
                <LastName>McPetersson</LastName>
                <Telephone>07702123456</Telephone>
                <Mobile>07702123456</Mobile>
                <LandLine>0161544123</LandLine>
                <Email>peter.mcpetersson@test.com</Email>
            </Contact>
            <CompanyName xmlns="http://electioapp.com/schemas/v1/MPD.Electio.SDK.DataTypes.Common">Test Company (UK) Ltd.</CompanyName>
            <AddressLine1 xmlns="http://electioapp.com/schemas/v1/MPD.Electio.SDK.DataTypes.Common">13 Porter Street</AddressLine1>
            <AddressLine2 xmlns="http://electioapp.com/schemas/v1/MPD.Electio.SDK.DataTypes.Common">Pressington</AddressLine2>
            <AddressLine3 xmlns="http://electioapp.com/schemas/v1/MPD.Electio.SDK.DataTypes.Common">Carlsby</AddressLine3>
            <Town xmlns="http://electioapp.com/schemas/v1/MPD.Electio.SDK.DataTypes.Common">Manchester</Town>
            <Region xmlns="http://electioapp.com/schemas/v1/MPD.Electio.SDK.DataTypes.Common">Greater Manchester</Region>
            <Postcode xmlns="http://electioapp.com/schemas/v1/MPD.Electio.SDK.DataTypes.Common">M1 5WG</Postcode>
            <Country xmlns="http://electioapp.com/schemas/v1/MPD.Electio.SDK.DataTypes.Common">
                <Name>United Kingdom</Name>
                <IsoCode>
                    <TwoLetterCode>GB</TwoLetterCode>
                </IsoCode>
            </Country>
            <SpecialInstructions xmlns="http://electioapp.com/schemas/v1/MPD.Electio.SDK.DataTypes.Common">Gate code: 4454</SpecialInstructions>
            <AddressType>Destination</AddressType>
        </Address>
    </Addresses>
    <Packages>
        <Package>
            <Reference>EP-000-05C-BF7</Reference>
            <PackageReferenceProvidedByCustomer>MYPACK-00923</PackageReferenceProvidedByCustomer>
            <ConsignmentLegs />
            <Weight>
                <Kg xmlns="http://electioapp.com/schemas/v1/MPD.Electio.SDK.DataTypes.Common">0.50000</Kg>
            </Weight>
            <Dimensions>
                <Width xmlns="http://electioapp.com/schemas/v1/MPD.Electio.SDK.DataTypes.Common">10.00</Width>
                <Length xmlns="http://electioapp.com/schemas/v1/MPD.Electio.SDK.DataTypes.Common">10.00</Length>
                <Height xmlns="http://electioapp.com/schemas/v1/MPD.Electio.SDK.DataTypes.Common">10.00</Height>
            </Dimensions>
            <Value>
                <Amount xmlns="http://electioapp.com/schemas/v1/MPD.Electio.SDK.DataTypes.Common">5.9900</Amount>
                <Currency xmlns="http://electioapp.com/schemas/v1/MPD.Electio.SDK.DataTypes.Common">
                    <Name>Pound Sterling</Name>
                    <IsoCode>GBP</IsoCode>
                </Currency>
            </Value>
            <Description>Socks</Description>
            <Barcode>
                <Code xmlns="http://electioapp.com/schemas/v1/MPD.Electio.SDK.DataTypes.Common">09887-091221</Code>
                <BarcodeType xmlns="http://electioapp.com/schemas/v1/MPD.Electio.SDK.DataTypes.Common">Code39</BarcodeType>
            </Barcode>
            <Items>
                <Item>
                    <Reference>4a93a9129d284e999bd2485d9c0a99a3</Reference>
                    <Sku>SKU093434</Sku>
                    <Model>ITM-002</Model>
                    <Description>Striped Bamboo Red/White</Description>
                    <CountryOfOrigin>
                        <Name xmlns="http://electioapp.com/schemas/v1/MPD.Electio.SDK.DataTypes.Common">United Kingdom</Name>
                        <IsoCode xmlns="http://electioapp.com/schemas/v1/MPD.Electio.SDK.DataTypes.Common">
                            <TwoLetterCode>GB</TwoLetterCode>
                        </IsoCode>
                    </CountryOfOrigin>
                    <HarmonisationCode>Harmonisation_Code</HarmonisationCode>
                    <Weight>
                        <Kg xmlns="http://electioapp.com/schemas/v1/MPD.Electio.SDK.DataTypes.Common">0.50000</Kg>
                    </Weight>
                    <Dimensions>
                        <Width xmlns="http://electioapp.com/schemas/v1/MPD.Electio.SDK.DataTypes.Common">10.00</Width>
                        <Length xmlns="http://electioapp.com/schemas/v1/MPD.Electio.SDK.DataTypes.Common">10.00</Length>
                        <Height xmlns="http://electioapp.com/schemas/v1/MPD.Electio.SDK.DataTypes.Common">10.00</Height>
                    </Dimensions>
                    <Value>
                        <Amount xmlns="http://electioapp.com/schemas/v1/MPD.Electio.SDK.DataTypes.Common">5.9900</Amount>
                        <Currency xmlns="http://electioapp.com/schemas/v1/MPD.Electio.SDK.DataTypes.Common">
                            <Name>Pound Sterling</Name>
                            <IsoCode>GBP</IsoCode>
                        </Currency>
                    </Value>
                    <ItemReferenceProvidedByCustomer>ITEMREF-098</ItemReferenceProvidedByCustomer>
                    <Barcode>
                        <Code xmlns="http://electioapp.com/schemas/v1/MPD.Electio.SDK.DataTypes.Common">09887-091221</Code>
                        <BarcodeType xmlns="http://electioapp.com/schemas/v1/MPD.Electio.SDK.DataTypes.Common">Code39</BarcodeType>
                    </Barcode>
                    <MetaData />
                    <UnitOfQuantity>0</UnitOfQuantity>
                    <HarmonisationKeyWords>
                        <string>Keyword1</string>
                    </HarmonisationKeyWords>
                    <ContentClassification xsi:nil="true" />
                    <ContentClassificationDetails xsi:nil="true" />
                </Item>
            </Items>
            <MetaData />
            <Charges />
        </Package>
    </Packages>
</CreateConsignmentRequest>
```
> Example Create Consignment Response
```json
[
  {
    "Rel": "Link",
    "Href": "https://api.electioapp.com/consignments/EC-000-05A-Z6S"
  }
]
```
```xml
<?xml version="1.0" encoding="utf-8"?>
<ArrayOfApiLink xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <ApiLink>
    <Rel xmlns="http://electioapp.com/schemas/v1.1/MPD.Electio.SDK.DataTypes.Common">Link</Rel>
    <Href xmlns="http://electioapp.com/schemas/v1.1/MPD.Electio.SDK.DataTypes.Common">https://api.electioapp.com/consignments/EC-000-05A-Z6S</Href>
  </ApiLink>
</ArrayOfApiLink>
```

The first step toward manifesting a consignment is to create that consignment in PRO. Consignments are created using the **Create Consignment** endpoint, which takes information about new consignments, adds them to the database, and returns a `{consignmentReference}`. The `{consignmentReference}` is a unique identifier for that consignment within PRO, and is used throughout PRO's APIs.

<aside class="info">
  In the context of PRO, the term <strong>consignment</strong> refers to a collection of packages that are transported from the same origin, to the same destination, on behalf of the same customer, and by the same carrier.
  
  A <strong>package</strong> is an <strong>item</strong> or a collection of items, wrapped or contained together for shipment. Packages make up consignments and in turn are made up of items. One package can contain one or more items, and one consignment can contain one or more packages.

  As an example, suppose that a retailer has received an order for a pair of shoes, a coat and a hat. This would likely break down to:

  * Four items - The left shoe, the right shoe, the coat and the hat.
  * Three packages - One containing both shoes, one containing the coat and one containing the hat.
  * A single consignment corresponding to everything on the order.
</aside>

At a minimum, the **Create Consignments** endpoint requires you to send package, origin address and destination address data in order to successfully create a consignment.

However, there are lots of other properties you can send when creating a consignment, including:

* Your own consignment reference
* The consignment's source
* Shipping and delivery dates
* Customs documentation
* The consignment's direction of travel
* Metadata and tags.

The consignment's origin address must include a valid <code>ShippingLocationReference</code>. For information on how to obtain a list of your organisation's shipping locations, see the <strong><a href="https://docs.electioapp.com/#/api/GetShippingLocations">Get Shipping Locations</a></strong> page of the API reference.

<aside class="note">
  For full reference information on the <strong>Create Consignment</strong> endpoint, see the <strong><a href="https://docs.electioapp.com/#/api/CreateConsignment">Create Consignment</a></strong> page of the API reference.
</aside>

</section>
<section>

### Example

The example to the right shows the creation of a fairly standard consignment. In this case, we have an outbound consignment comprising a single package with a single item inside it.

After receiving the request, PRO returns a `{consignmentReference}` of _EC-000-05A-Z6S_. That `{consignmentReference}` might come in useful when we allocate the consignment in the next step of the process, as some of PRO's allocation endpoints take `{consignmentReference}` as a parameter.

</section>
</section>

<section>

## Step 2: Allocating Consignments

> Allocation Endpoints
```
PUT https://api.electioapp.com/allocation/{consignmentReference}/allocatewithcheapestquote
PUT https://api.electioapp.com/allocation/{consignmentReference}/allocatewithservicegroup/{mpdCarrierServiceGroupReference}
PUT https://api.electioapp.com/allocation/allocate
PUT https://api.electioapp.com/allocation/allocatewithcarrierservice
PUT https://api.electioapp.com/allocation/allocateConsignmentsWithServiceFilters
```

Once you've created your consignment, you'll need to allocate it to a carrier. PRO has multiple allocation endpoints, giving you the flexibility to allocate to carriers using whatever criteria suits you best. In this flow you could allocate via:

* [Allocate Consignment](https://docs.electioapp.com/#/api/AllocateConsignment) - Allocates the consignment to the carrier offering the cheapest quote.
* [Allocate Consignment With Service Group](https://docs.electioapp.com/#/api/AllocateConsignmentWithServiceGroup) - Allocates the consignment to the cheapest carrier in the specified Carrier Service Group.
* [Allocate Using Default Rules](https://docs.electioapp.com/#/api/AllocateUsingDefaultRules) - Allocates the consignment using pre-configured default rules.
* [Allocate With Carrier Service](https://docs.electioapp.com/#/api/AllocateWithCarrierService) - Allocates the consignment to the specified carrier service.
* [Allocate With Service Filters](https://docs.electioapp.com/#/api/AllocateWithServiceFilters) - Allocates the consignment to the cheapest carrier matching the service filters provided in the request.

<aside class="info">
  |In the content of PRO, allocation is the process of selecting a carrier service for a consignment.
</aside>

Once you have allocated a consignment, its status changes to *Allocated*, enabling you to get shipment labels for it.

This section explains the circumstances in which you might choose to use each endpoint, and gives worked examples.

<section>

### The Allocation Summary Response

> Example Allocation Summary Response
```json
[
    {
        "IsSuccess": true,
        "Message": "Consignment EC-000-05A-Z6S has been successfully allocated with Carrier X Next Day Super for shipping on 25/04/2019 16:00:00 +00:00",
        "Data": "EC-000-05A-Z6S",
        "ApiLinks": [
            {
                "Rel": "detail",
                "Href": "https://api.electioapp.com/consignments/EC-000-05A-Z6S"
            },
            {
                "Rel": "label",
                "Href": "https://api.electioapp.com/labels/EC-000-05A-Z6S"
            }
        ]
    }
]
```
```xml
<?xml version="1.0" encoding="utf-8"?>
<AllocationSummary xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://electioapp.com/schemas/v1.1/MPD.Electio.SDK.DataTypes.Consignments">
  <StatusCode>200</StatusCode>
  <ApiLinks>
    <ApiLink>
      <Rel xmlns="http://electioapp.com/schemas/v1.1/MPD.Electio.SDK.DataTypes.Common">Link</Rel>
      <Href xmlns="http://electioapp.com/schemas/v1.1/MPD.Electio.SDK.DataTypes.Common">https://api.electioapp.com/consignments/EC-000-05A-Z6S</Href>
    </ApiLink>
    <ApiLink>
      <Rel xmlns="http://electioapp.com/schemas/v1.1/MPD.Electio.SDK.DataTypes.Common">Label</Rel>
      <Href xmlns="http://electioapp.com/schemas/v1.1/MPD.Electio.SDK.DataTypes.Common">https://api.electioapp.com/labels/EC-000-05A-Z6S</Href>
    </ApiLink>
  </ApiLinks>
  <Description>Consignment EC-000-05A-Z6S allocated with Carrier X Next Day Super successfully.</Description>
  <ConsignmentLegs>
    <ConsignmentLeg>
      <Leg>0</Leg>
      <TrackingReferences>
        <string>TRK00009823</string>
      </TrackingReferences>
      <CarrierReference>CARRIER_X</CarrierReference>
      <CarrierName>Carrier X</CarrierName>
    </ConsignmentLeg>
  </ConsignmentLegs>
  <CarrierReference>CARRIER_X</CarrierReference>
  <CarrierName>Carrier X</CarrierName>
  <CarrierServiceReference>CX_NDS</CarrierServiceReference>
  <CarrierServiceName>Next Day Super</CarrierServiceName>
</AllocationSummary>
```

All allocation endpoints return an Allocation Summary, either singularly or (where multiple consignments have been allocated at once) in an array. The Allocation Summary contains links to the consignment resource that was allocated and a summary of the carrier service that the consignment was allocated to.

In the example to the right, the consignment we created in the previous section (with a `{consignmentReference}` of _EC-000-05A-Z6S_) has been allocated to a (dummy) carrier service called _Carrier X Next Day Super_.

</section>

<section>

## Step 2a: Allocating by Cheapest Quote

> Allocate Consignment endpoint
```
PUT https://api.electioapp.com/allocation/{consignmentReference}/allocatewithcheapestquote
```

To allocate a single consignment to the cheapest available carrier service, use the **Allocate Consignment** endpoint. Once an **Allocate Consignment** request is received and validated, PRO checks for quotes to ship the consignment in question, and automatically allocates the consignment to the cheapest service. 

This endpoint takes a `{consignmentReference}` as a path parameter, and returns a single Allocation Summary.

> Example Allocate Consignment Request
```
PUT https://api.electioapp.com/allocation/EC-000-05A-Z6S/allocatewithcheapestquote
```
### Example

The example to the right shows a request to allocate the consignment we created in the previous section (with a `{consignmentReference}` of _EC-000-05A-Z6S_) via the **Allocate Consignment** endpoint. 

<aside class="note">
  For full reference information on the <strong>Allocate Consignment</strong> endpoint, see the <strong><a href="https://docs.electioapp.com/#/api/AllocateConsignment">Allocate Consignment API Reference</a></strong>. 
</aside>

</section>

<section>

## Step 2b: Allocating to a Service Group

> Allocate Consignment With Service Group endpoint
```
PUT https://api.electioapp.com/allocation/{consignmentReference}/allocatewithservicegroup/{mpdCarrierServiceGroupReference}
```

To allocate a consignment to the cheapest carrier service in a particular carrier service group, use the **Allocate Consignment With Service Group** endpoint.  

<aside class="info">
  PRO carrier service groups are pools of carrier services that you can allocate consignments to in specific situations. For example, you might create a carrier service group containing all available services that will accept high-value goods. 

  To configure carrier service groups, use the <strong><a href="https://www.electioapp.com/Configuration/CarrierServiceGroups">Configuration - Carrier Service Groups</a></strong> UI page. 
</aside>  

Allocating by service group can help you to avoid inadvertently allocating a consignment to an unsuitable service. For example, if your organisation was to receive an order for a particularly high-value consignment, you could then use the **Allocate Consignment With Service Group** endpoint to allocate that consignment to one of the services in your high-value service group. This would remove the risk and inconvenience of allocating the consignment to a "standard" service, only to have it rejected by the carrier. 

The **Allocate Consignment With Service Group** endpoint takes the `{consignmentReference}` of the consignment you want to allocate and the `{mpdCarrierServiceGroupReference}` of the service group you want to allocate to as path parameters, and returns an Allocation Summary with details of the service that was allocated. 

The `{mpdCarrierServiceGroupReference}` is a unique identifier for each carrier service group. To find the `{mpdCarrierServiceGroupReference}` for a particular group, log in to the PRO UI, navigate to **Settings > Carrier Service Groups** and locate the tile for that group. The `{mpdCarrierServiceGroupReference}` is shown in the **Code** field.

<aside class="note">
  For full reference information on the <strong>Allocate Consignment With Service Group</strong> endpoint, see the <a href="https://docs.electioapp.com/#/api/AllocateConsignmentWithServiceGroup">Allocate Consignment With Service Group API Reference</a>. 
</aside>

> Example Allocate Consignment With Service Group Request
```
PUT https://api.electioapp.com/allocation/EC-000-05A-Z6S/allocatewithservicegroup/valuableGoods
```

### Example

The example to the right shows a request to allocate the consignment we created in the previous section (with a `{consignmentReference}` of _EC-000-05A-Z6S_) to a carrier service within a group named `valuableGoods`.

</section>

<section>

## Step 2c: Allocating using Default Rules

> Allocate Using Default Rules endpoint
```
PUT https://api.electioapp.com/allocation/allocate
```
To allocate one or more consignments based on your organisation's custom allocation rules, use the **Allocate Using Default Rules** endpoint.

<aside class="info">
  PRO allocation rules enable you to place constraints - such as physical package size, consignment value, and geographical availability - against individual carrier services. They are configured via the UI's <a href="https://www.electioapp.com/Configuration/EditCarrierService/acceptanceTestCarrier_f8fe"><strong>Manage Carrier Service Rules</strong></a> page. 
  
  For more information on configuring allocation rules, see the _Configure Allocation Rules_ section of the PRO Admin Portal User Guide.
</aside>

The **Allocate Using Default Rules** endpoint can be used to allocate multiple consignments simultaneously. The request body should contain an array of `{consignmentReference}`s to be allocated. 

Once the request is received, PRO takes each consignment in turn and allocates it to the cheapest eligible carrier, based on your default rules. It then returns an array of Allocation Summaries, one for each allocated consignment. 

<aside class="note">
  For full reference information on the <strong>Allocate Using Default Rules</strong> endpoint, see the <a href="https://docs.electioapp.com/#/api/AllocateUsingDefaultRules">Allocate Using Default Rules API Reference</a>. 
</aside>

> Example Allocate Using Default Rules Request
```json
PUT https://api.electioapp.com/allocation/allocate

{
  "ConsignmentReferences": [
    "EC-000-05A-Z6S",
    "EC-000-083-45D",
    "EC-000-A04-0DV"
  ]
}
```
```xml
PUT https://api.electioapp.com/allocation/allocate

<?xml version="1.0" encoding="utf-8"?>
<AllocateConsignmentsRequest xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://electioapp.com/schemas/v1.1/MPD.Electio.SDK.DataTypes.Consignments">
  <ConsignmentReferences>
    <string>EC-000-05A-Z6S</string>
    <string>EC-000-083-45D</string>
    <string>EC-000-A04-0DV</string>
  </ConsignmentReferences>
</AllocateConsignmentsRequest>
```

### Example

The example to the right shows a request to allocate the consignment we created in the previous section (with a `{consignmentReference}` of _EC-000-05A-Z6S_), along with two other consignments, via default rules. 

</section>

<section>

## Step 2d: Allocating to a Specific Carrier Service

> Allocate With Carrier Service endpoint
```
PUT https://api.electioapp.com/allocation/allocatewithcarrierservice
```

To allocate one or more consignments to a specific carrier service, use the **Allocate With Carrier Service** endpoint. 

The **Allocate With Carrier Service** endpoint can be used to allocate multiple consignments simultaneously. The request body should contain an array of `{consignmentReference}`s to be allocated, and the `{MpdCarrierServiceReference}` of the carrier service that they should be allocated to. 

Once the request is received, PRO attempts to allocate the consignments to the specified carrier service. It then returns an array of Allocation Summaries, one for each allocated consignment. 

<aside class="note">
  For full reference information on the <strong>Allocate With Carrier Service</strong> endpoint, see the <a href="https://docs.electioapp.com/#/api/AllocateWithCarrierService">Allocate With Carrier Service API Reference</a>. 
</aside>

> Example Allocate With Carrier Service Request

```json
PUT https://api.electioapp.com/allocation/allocatewithcarrierservice

{
  "MpdCarrierServiceReference": "Example-Carrier-Service",
  "ConsignmentReferences": [
    "EC-000-05A-Z6S",
    "EC-000-083-45D",
    "EC-000-A04-0DV"
  ]
}
```
```xml
PUT https://api.electioapp.com/allocation/allocatewithcarrierservice

<?xml version="1.0" encoding="utf-8"?>
<AllocateConsignmentsWithCarrierServiceRequest xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://electioapp.com/schemas/v1.1/MPD.Electio.SDK.DataTypes.Consignments">
  <ConsignmentReferences>
    <string>EC-000-05A-Z6S</string>
    <string>EC-000-083-45D</string>
    <string>EC-000-A04-0DV</string>
  </ConsignmentReferences>
  <MpdCarrierServiceReference>Example-Carrier-Service</MpdCarrierServiceReference>
</AllocateConsignmentsWithCarrierServiceRequest>
```

### Example

The example to the right shows a request to allocate the consignment we created in the previous section (with a `{consignmentReference}` of _EC-000-05A-Z6S_), along with two other consignments, to a carrier service with an `{MpdCarrierServiceReference}` of _Example-Carrier-Service_ .

</section>

<section>

## Step 2e: Allocating Using Service Filters

> Allocate With Service Filters endpoint
```
PUT https://api.electioapp.com/allocation/allocateConsignmentsWithServiceFilters
```

To allocate one or more consignments via service filters, use the **Allocate With Service Filters** endpoint. The **Allocate With Service Filters** endpoint enables you to filter the list of available services as part of your allocation API call (as opposed to using pre-configured rules or service groups). 

The **Allocate With Service Filters** endpoint can be used to allocate multiple consignments simultaneously. The request body should contain an array of `{consignmentReference}`s to be allocated, and a `filters` object indicating the filter conditions to be used.

The `filters` object contains the following:

* A `ServiceDirection` property indicating whether the consignment should be allocated to an _inbound_ or _outbound_ carrier service.
* An (optional) Boolean `IsPickup` property indicating whether pick-up services should be included.
* An (optional) Boolean `IsDropOff` property indicating whether drop-off services should be included. 

Once the request is received, PRO attempts to allocate the consignments to the cheapest service that meets the criteria set out in the `filters` object. It then returns an array of Allocation Summaries, one for each allocated consignment. 

<aside class="note">
  For full reference information on the <strong>Allocate With Service Filters</strong> endpoint, see the <a href="https://docs.electioapp.com/#/api/AllocateWithServiceFilters">Allocate With Service Filters API Reference</a>. 
</aside>

> Example Allocate With Service Filters Request

```json
PUT https://api.electioapp.com/allocation/allocateConsignmentsWithServiceFilters

{
  "ConsignmentReferences": [
    "EC-000-05A-Z6S",
    "EC-000-083-45D",
    "EC-000-A04-0DV"
  ],
  "Filters": {
    "ServiceDirection": "Outbound",
    "IsPickup": false,
    "IsDropOff": true
  }
}
```
```xml
PUT https://api.electioapp.com/allocation/allocateConsignmentsWithServiceFilters

<?xml version="1.0" encoding="utf-8"?>
<AllocateConsignmentsWithServiceFiltersRequest xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://electioapp.com/schemas/v1.1/MPD.Electio.SDK.DataTypes.Consignments">
  <ConsignmentReferences>
    <string>EC-000-05A-Z6S</string>
    <string>EC-000-083-45D</string>
    <string>EC-000-A04-0DV</string>
  </ConsignmentReferences>
  <Filters>
    <ServiceDirection>Outbound</ServiceDirection>
    <IsPickup>false</IsPickup>
    <IsDropOff>true</IsDropOff>
  </Filters>
</AllocateConsignmentsWithServiceFiltersRequest>
```

### Example

The example to the right shows a request to allocate the consignment we created in the previous section (with a `{consignmentReference}` of _EC-000-05A-Z6S_), along with two other consignments, to an outbound, drop-off carrier service.

</section>

</section>

<section>

## Step 3: Getting Shipment Labels

> Get Labels Endpoint
```
GET https://api.electioapp.com/labels/{consignmentReference}
```

When you allocate a consignment, PRO automatically generates delivery labels for that consignment to be delivered using its allocated service. The next step in the process is to get those delivery labels via the **Get Labels** endpoint.

The **Get Labels** endpoint takes the `{consignmentReference}` of the consignment you want to get labels for as a path parameter, and returns all label file data associated with that consignment as a base64-encoded byte array, as well as a `ContentType` property indicating the file format that the label(s) are in.

Labels are only valid for the combination of the consignment and its allocated carrier service. If you were to de-allocate a consignment for any reason, the consignment's existing labels would be purged from the database, and you would need to run **Get Labels** again once the consignment had been re-allocated.

<aside class="note">
  In addition to the <strong>Get Labels</strong> endpoint, you can also use the following PRO endpoints to get label data:

  * <strong>Get Labels in Format</strong> - returns a consignment's labels in a file format of your choice.
  * <strong>Get Package Label</strong> - returns a label for an individual package.
  * <strong>Get Package Label in Format</strong> - returns a label for an individual package in a file format of your choice.

</aside>  

> Example Get Labels Request
```
GET https://api.electioapp.com/labels/EC-000-05A-Z6S
```
> Example Get Labels Response
```json
{
  "File": "SlZCRVJpMHhMalFLSmRQcjZ ... [truncated for brevity] ... TVRrNU9ERUtKU1ZGVDBZPQ==",
  "ContentType": "application/pdf"
}
```
```xml
<?xml version="1.0" encoding="utf-8"?>
<GetLabelsResponse xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://electioapp.com/schemas/v1.1/MPD.Electio.SDK.DataTypes.LabelGeneration">
  <File>SlZCRVJpMHhMalFLSmRQcjZ ... [truncated for brevity] ... TVRrNU9ERUtKU1ZGVDBZPQ==</File>
  <ContentType>application/pdf</ContentType>
</GetLabelsResponse>
```

### Examples

The example to the right shows a request to get labels for the consignment we created in the previous section (with a `{consignmentReference}` of _EC-000-05A-Z6S_). The file data in the response has been truncated for clarity.

You would next need to decode the file's Base64 in order to view the label itself. If you are unsure how to do so, see [this link](https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding) for more information.

</section>

<section>

## Step 4: Manifesting a Consignment

> Manifest Consignments Endpoint
```
PUT https://api.electioapp.com/consignments/manifest
```

Now that you've created your consignment, allocated it to a carrier service and got labels for it, you're ready to manifest it. To manifest a consignment , use the **Manifest Consignments** endpoint.

<aside class="info">
  In the context of PRO, the term "manifest" refers to confirming that a carrier will take a particular consignment on the carrier service that the consignment was allocated to. Specifically, the consignment is added to the manifest for that service.
</aside>

The **Manifest Consignments** endpoint can be used to manifest multiple consignments at once. The request should contain an array of `{consignmentReference}`s, corresponding to the consignments to be manifested. 

All the consignments you provide in the request should be in a state of either _Allocated_ or _Manifest Failed_. If you attempt to manifest a consignment that is not in one of these states then PRO returns an error.

Once PRO has received the request and attempted to manifest the consignments, the **Manifest Consignments** endpoint returns an array of messages indicating whether each invididual consignment was successfully manifested or not. The status of the successfully manifested consignments changes to _Manifested_, and the status of any consignments that could not be manifested changes to _Manifest Failed_.

> Example Manifest Consignment Request

```json
{
  "ConsignmentReferences": [
    "EC-000-05A-Z6S",
    "EC-000-083-45D",
    "EC-000-A04-0DV"
  ]
}
```
```xml
<?xml version="1.0" encoding="utf-8"?>
<ManifestConsignmentsRequest xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://electioapp.com/schemas/v1.1/MPD.Electio.SDK.DataTypes.Consignments">
  <ConsignmentReferences>
    <string>EC-000-05A-Z6S</string>
    <string>EC-000-083-45D</string>
    <string>EC-000-A04-0DV</string>
  </ConsignmentReferences>
</ManifestConsignmentsRequest>
```

> Example Manifest Consignment Response

```json
[
  {
    "IsSuccess": true,
    "Message": "Consignment EC-000-002-5FG has been manifested successfully.",
    "Data": "EC-000-002-5FG",
    "ApiLinks": [
      {
        "Rel": "Link",
        "Href": "https://api.electioapp.com/consignments/EC-000-002-5FG"
      }
    ]
  },
  {
    "IsSuccess": true,
    "Message": "Consignment EC-000-002-5FG has been manifested successfully.",
    "Data": "EC-000-002-5FG",
    "ApiLinks": [
      {
        "Rel": "Link",
        "Href": "https://api.electioapp.com/consignments/EC-000-002-5FG"
      }
    ]
  },
  {
    "IsSuccess": true,
    "Message": "Consignment EC-000-002-5FG has been manifested successfully.",
    "Data": "EC-000-002-5FG",
    "ApiLinks": [
      {
        "Rel": "Link",
        "Href": "https://api.electioapp.com/consignments/EC-000-002-5FG"
      }
    ]
  }
]
```
```xml
<?xml version="1.0" encoding="utf-8"?>
<ArrayOfWithMessageOfString xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <WithMessageOfString>
    <IsSuccess xmlns="http://electioapp.com/schemas/v1.1/MPD.Electio.SDK.DataTypes.Consignments">true</IsSuccess>
    <Message xmlns="http://electioapp.com/schemas/v1.1/MPD.Electio.SDK.DataTypes.Consignments">Consignment EC-000-002-5FG has been manifested successfully.</Message>
    <Data xmlns="http://electioapp.com/schemas/v1.1/MPD.Electio.SDK.DataTypes.Consignments">EC-000-002-5FG</Data>
    <ApiLinks xmlns="http://electioapp.com/schemas/v1.1/MPD.Electio.SDK.DataTypes.Consignments">
      <ApiLink>
        <Rel xmlns="http://electioapp.com/schemas/v1.1/MPD.Electio.SDK.DataTypes.Common">Link</Rel>
        <Href xmlns="http://electioapp.com/schemas/v1.1/MPD.Electio.SDK.DataTypes.Common">https://api.electioapp.com/consignments/EC-000-002-5FG</Href>
      </ApiLink>
    </ApiLinks>
  </WithMessageOfString>
  <WithMessageOfString>
    <IsSuccess xmlns="http://electioapp.com/schemas/v1.1/MPD.Electio.SDK.DataTypes.Consignments">true</IsSuccess>
    <Message xmlns="http://electioapp.com/schemas/v1.1/MPD.Electio.SDK.DataTypes.Consignments">Consignment EC-000-002-5FG has been manifested successfully.</Message>
    <Data xmlns="http://electioapp.com/schemas/v1.1/MPD.Electio.SDK.DataTypes.Consignments">EC-000-002-5FG</Data>
    <ApiLinks xmlns="http://electioapp.com/schemas/v1.1/MPD.Electio.SDK.DataTypes.Consignments">
      <ApiLink>
        <Rel xmlns="http://electioapp.com/schemas/v1.1/MPD.Electio.SDK.DataTypes.Common">Link</Rel>
        <Href xmlns="http://electioapp.com/schemas/v1.1/MPD.Electio.SDK.DataTypes.Common">https://api.electioapp.com/consignments/EC-000-002-5FG</Href>
      </ApiLink>
    </ApiLinks>
  </WithMessageOfString>
  <WithMessageOfString>
    <IsSuccess xmlns="http://electioapp.com/schemas/v1.1/MPD.Electio.SDK.DataTypes.Consignments">true</IsSuccess>
    <Message xmlns="http://electioapp.com/schemas/v1.1/MPD.Electio.SDK.DataTypes.Consignments">Consignment EC-000-002-5FG has been manifested successfully.</Message>
    <Data xmlns="http://electioapp.com/schemas/v1.1/MPD.Electio.SDK.DataTypes.Consignments">EC-000-002-5FG</Data>
    <ApiLinks xmlns="http://electioapp.com/schemas/v1.1/MPD.Electio.SDK.DataTypes.Consignments">
      <ApiLink>
        <Rel xmlns="http://electioapp.com/schemas/v1.1/MPD.Electio.SDK.DataTypes.Common">Link</Rel>
        <Href xmlns="http://electioapp.com/schemas/v1.1/MPD.Electio.SDK.DataTypes.Common">https://api.electioapp.com/consignments/EC-000-002-5FG</Href>
      </ApiLink>
    </ApiLinks>
  </WithMessageOfString>    
</ArrayOfWithMessageOfString>
```

### Examples

The example to the right shows a request to manifest the consignment we created in the previous section (with a `{consignmentReference}` of _EC-000-05A-Z6S_), along with two other consignments. The response indicates that all three consignments were successfully manifested.

**(WHAT DO THEY DO AFTER MANIFESTING?)**

</section>

</section>

<section>

# Selecting Delivery Options

</section>

<section>

# Selecting Pickup Options

</section>

<section>

# Creating a Pack Order Flow From Delivery Options

</section>

<section>

# Creating a Pack Order Flow From an Existing Order

![order-pack-order-flow](source/images/order-pack-order-flow.png)

</section>

<section>

# Selecting Quotes

</section>
